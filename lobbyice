task.wait(3)
local rs = game:GetService("ReplicatedStorage")
local rf = rs:WaitForChild("RemoteFunctions")
local ws = game:GetService("Workspace")
local player = game.Players.LocalPlayer

-- ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Lobby ‡∏´‡∏£‡∏∑‡∏≠ Farm
local function isInLobby()
    local map = ws:FindFirstChild("Map")
    if not map then return false end
    return map:FindFirstChild("Garden") ~= nil
end

-- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞ RemoteFunction ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ
local farmConfig = {
    {
        pos = CFrame.new(85.0509491, 71.7316132, 788.809753, 1,0,0, 0,1,0, 0,0,1),
        mapFunc = "LobbySetMap_5",
        playerFunc = "LobbySetMaxPlayers_5"
    },
    {
        pos = CFrame.new(97.050827, 71.7316132, 788.809814, 1,0,0, 0,1,0, 0,0,1),
        mapFunc = "LobbySetMap_6",
        playerFunc = "LobbySetMaxPlayers_6"
    },
    {
        pos = CFrame.new(109.050949, 71.7316132, 788.809753, 1,0,0, 0,1,0, 0,0,1),
        mapFunc = "LobbySetMap_7",
        playerFunc = "LobbySetMaxPlayers_7"
    },
    {
        pos = CFrame.new(121.050888, 71.7316132, 788.809753, 1,0,0, 0,1,0, 0,0,1),
        mapFunc = "LobbySetMap_8",
        playerFunc = "LobbySetMaxPlayers_8"
    }
}

-- ‡∏ß‡∏≤‡∏£‡πå‡∏õ‡πÑ‡∏õ‡∏à‡∏∏‡∏î‡∏ü‡∏≤‡∏£‡πå‡∏°
local function warpToFarm(cfg)
    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if hrp then
        hrp.CFrame = cfg.pos
        print("üìç ‡∏ß‡∏≤‡∏£‡πå‡∏õ‡πÑ‡∏õ‡∏à‡∏∏‡∏î‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÅ‡∏•‡πâ‡∏ß:", cfg.pos)
    end
end

-- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
local function setupLobby(cfg)
    task.wait(4) -- ‚úÖ ‡∏£‡∏≠ 4 ‡∏ß‡∏¥‡∏´‡∏•‡∏±‡∏á‡∏ß‡∏≤‡∏£‡πå‡∏õ
    rf:WaitForChild(cfg.mapFunc):InvokeServer("map_christmas")
    print("üéØ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡πà‡∏≤‡∏ô map_farm ‡∏î‡πâ‡∏ß‡∏¢:", cfg.mapFunc)
    task.wait(1)
    for i = 3, 1, -1 do
        rf:WaitForChild(cfg.playerFunc):InvokeServer(i)
        print("üë• ‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô:", i, "‡∏î‡πâ‡∏ß‡∏¢:", cfg.playerFunc)
        task.wait(0.5)
    end
end

-- ‡∏ß‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏à‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏ü‡∏≤‡∏£‡πå‡∏°
local function waitUntilFarm()
    while isInLobby() do
        -- ‚úÖ ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
        local index = math.random(1, #farmConfig)
        local cfg = farmConfig[index]

        warpToFarm(cfg)
        setupLobby(cfg)
        task.wait(10) -- ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≠ 10 ‡∏ß‡∏¥
    end
    print("‚úÖ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏¥‡πà‡∏° AutoFarm")
    runAutoRound() -- ‚Üê ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô AutoFarm ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
end

-- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
waitUntilFarm()
